#!/usr/bin/env ruby

basedir = "~/.vim/bundle/"
Dir.chdir(File.expand_path basedir)

entries = Dir.glob("*")

# ignore any plain old files in this directory...
# why would there be any?
entries.delete_if do |entry|
  path_to_entry = basedir + entry
  not File.directory?(File.expand_path path_to_entry)
end

def update_you_complete_me
  system "git pull"
  system "git submodule update --init --recursive"
  system "./install.sh"
end

entries.each do |entry|
  path = basedir + entry
  Dir.chdir(File.expand_path path)
  puts entry
  puts "-------------------------"

  case entry
  when 'YouCompleteMe'
    update_you_complete_me
  else
    system "git pull"
  end

  puts "-------------------------\n\n\n\n"
end
