#!/usr/bin/env ruby

# remove xvim plugin
Dir.chdir(File.expand_path("~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/"))
system("rm -rf XVim.xcplugin")

# get latest xvim
path = File.expand_path("~/Desktop")
Dir.chdir(path)
system("rm -rf #{path}/XVim")
system("git clone https://github.com/JugglerShu/XVim")

# install
Dir.chdir("#{path}/XVim")
system("xcodebuild -target \"XVim for Xcode5\" -scheme \"XVim for Xcode5\" -configuration Release")

# cleanup
system("rm -rf #{path}/XVim")
